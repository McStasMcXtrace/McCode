SHELL = /bin/sh

PERL = @PERL@

INSTALL=@INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA = @INSTALL_DATA@


prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
srcdir = @srcdir@
topdir = ..
libdir = @libdir@
mandir = @mandir@
PWD = `pwd`

mc_libdir = $(libdir)/mcstas

install:
	@echo "Install library (mcstas part)..."
	cd $(topdir) && for file in `cd nlib; ls | grep -v .svn| grep -v Make`; do \
	  if [ -d nlib/$$file ]; then \
	    ./mkinstalldirs $(mc_libdir)/$$file; \
	    for comp in `cd nlib/$$file; ls | grep -v .svn`; do \
	      if [ -f $(mc_libdir)/$$file/$$comp ]; then \
	        echo "Renaming old library element version $(mc_libdir)/$$file/$$comp to $(mc_libdir)/$$file/$$comp.old"; \
	        mv -f $(mc_libdir)/$$file/$$comp $(mc_libdir)/$$file/$$comp.old; \
	      fi; \
	      if [ -d nlib/$$file/$$comp ]; then \
	        ./mkinstalldirs $(mc_libdir)/$$file/$$comp; \
	        for tool in `cd nlib/$$file/$$comp; ls | grep -v .svn`; do \
	          if [ -d nlib/$$file/$$comp/$$tool ]; then \
	            ./mkinstalldirs $(mc_libdir)/$$file/$$comp/$$tool ; \
	            for subtool in `cd nlib/$$file/$$comp/$$tool; ls | grep -v .svn`; do \
	              if [ -d nlib/$$file/$$comp/$$tool/$$subtool ]; then \
	                ./mkinstalldirs $(mc_libdir)/$$file/$$comp/$$tool/$$subtool ; \
	                for subsubtool in `cd nlib/$$file/$$comp/$$tool/$$subtool; ls | grep -v .svn`; do \
	                  $(INSTALL_DATA) nlib/$$file/$$comp/$$tool/$$subtool/$$subsubtool $(mc_libdir)/$$file/$$comp/$$tool/$$subtool/$$subsubtool; \
	                done \
	              else \
	                $(INSTALL_DATA) nlib/$$file/$$comp/$$tool/$$subtool $(mc_libdir)/$$file/$$comp/$$tool/$$subtool; \
	              fi; \
	            done \
	          else \
	            $(INSTALL_DATA) nlib/$$file/$$comp/$$tool $(mc_libdir)/$$file/$$comp/$$tool; \
	          fi; \
	        done \
	      else \
	        $(INSTALL_DATA) nlib/$$file/$$comp $(mc_libdir)/$$file/$$comp; \
	      fi; \
	    done \
	  else \
	    $(INSTALL_DATA) nlib/$$file $(mc_libdir)/$$file; \
	  fi \
	done

installdirs:
	$(topdir)/mkinstalldirs $(bindir) $(libdir) $(mc_libdir) $(mandir)/man1
